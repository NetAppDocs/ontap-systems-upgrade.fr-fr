---
permalink: choose_controller_upgrade_procedure.html 
sidebar: sidebar 
keywords:  
summary: 'De manière générale, la mise à niveau du matériel du contrôleur dépend des modèles de plateforme des nœuds d"origine. Vous effectuez une mise à niveau en déplaçant des agrégats ou des volumes de stockage (procédure sans interruption) ou en déplaçant du stockage (procédure entraînant des perturbations).' 
---
= Choisissez la procédure de mise à niveau matérielle de votre contrôleur
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
De manière générale, la mise à niveau du matériel du contrôleur dépend des modèles de plateforme des nœuds d'origine. Vous effectuez une mise à niveau en déplaçant des agrégats ou des volumes (les deux procédures sans interruption de l'activité) ou en déplaçant le stockage (procédure disruptive). Si différentes versions de ONTAP sont exécutées sur les nœuds d'origine et les nouveaux nœuds, vous devrez peut-être effectuer une mise à niveau logicielle avant de démarrer la mise à niveau matérielle.


NOTE: Les mises à niveau ASA vers un système de remplacement ASA r2 ne sont pas prises en charge. Pour plus d'informations sur la migration des données d'un système ASA vers un système ASA r2, reportez-vous à la section link:https://docs.netapp.com/us-en/asa-r2/install-setup/set-up-data-access.html["Activez l'accès aux données depuis des hôtes SAN vers votre système de stockage ASA r2"^].



== Quelle procédure de mise à niveau dois-je utiliser ?

Pour sélectionner la procédure de mise à niveau appropriée, consultez toutes les questions répertoriées dans le tableau ci-dessous.

[cols="30,70"]
|===
| Posez-vous la question… | Si votre réponse est oui, vous pouvez faire ceci… 


| Est-ce que j'utilise une version logicielle différente sur les nœuds d'origine et les nouveaux nœuds ? | Mettez à niveau la version ONTAP sur les nœuds d'origine vers la version la plus récente prise en charge.  Dans la mesure du possible, les nouveaux nœuds doivent prendre en charge la version ONTAP exécutée sur les nœuds d'origine.  Si cela n'est pas possible,link:https://docs.netapp.com/us-en/ontap/upgrade/prepare.html["Mettez à niveau la version ONTAP"^] sur les nœuds d'origine jusqu'à la version la plus récente prise en charge.  La différence de version entre les nœuds d'origine et les nouveaux nœuds ne peut pas être supérieure à quatre.  Par exemple, ONTAP 9.8 et 9.12.1 sont pris en charge ; cependant, ONTAP 9.8 et 9.13.1 ne sont pas pris en charge. link:https://docs.netapp.com/us-en/ontap/upgrade/concept_mixed_version_requirements.html["En savoir plus sur les clusters ONTAP à versions mixtes"^]. 


| Est-ce que je souhaite effectuer une mise à niveau radicale ? | link:upgrade/upgrade-decide-to-use-this-guide.html["Mettre à niveau en déplaçant le stockage"]. Cela nécessite un nouveau système doté de ses propres espaces de stockage et étagères pour conserver les données du système d'origine.  La conversion d'un châssis de contrôleur est possible pour certaines mises à niveau. 


| Souhaite-je effectuer une mise à niveau sans interruption de service ?  a| 
Mettez à niveau en utilisant l'une des méthodes suivantes :

* link:upgrade/upgrade-decide-to-use-this-guide.html["Déplacer des volumes"]
+
Cela nécessite d'ajouter les nouveaux nœuds, de déplacer les volumes et les LIF vers les nouveaux nœuds, et de retirer du cluster les nœuds que vous souhaitez supprimer.  Si vous mettez à niveau un cluster sans commutateur à deux nœuds, convertissez-le en un cluster connecté à un commutateur à l'aide d'une paire de commutateurs de cluster avant d'ajouter de nouveaux nœuds.

* link:upgrade-arl/index.html["Utiliser la relocalisation agrégée"]
+
L'ARL est une procédure de remplacement.  Vous n'avez pas besoin d'agrandir ou de réduire votre cluster avec les nouveaux nœuds, ce qui est avantageux pour les clusters sans commutateur à deux nœuds.  Le déplacement de données par relocalisation d'agrégats est plus rapide que la copie de données entre agrégats lors du déplacement de volumes.





| Ai-je un système modulaire ?  *Remarque* : Dans un système modulaire, le contrôleur ne possède aucun disque interne et tout le stockage se fait sur des étagères externes. | link:upgrade-arl/index.html["Mise à niveau via le transfert d'agrégats"]. 


| Ai-je un système intégré et souhaite-je le mettre à niveau en déplaçant des volumes ?  *Remarque* : Dans un système intégré, le contrôleur possède des disques internes et le stockage est contenu dans le châssis du contrôleur et dans des étagères externes.  Les étagères externes servent à étendre le stockage et peuvent ne pas être incluses dans toutes les configurations système.  a| 
. link:https://hwu.netapp.com/DetailViews/Home.aspx["Vérifiez que votre système est pris en charge"^].
. link:upgrade/upgrade-decide-to-use-this-guide.html["Mise à niveau par déplacement de volumes"].




| Ai-je un système intégré et souhaite-je le mettre à niveau en remplaçant uniquement le module contrôleur, en conservant le châssis et les disques existants ? | link:upgrade-arl-auto-affa900/index.html["Mise à niveau via ARL, en conservant le même châssis et les mêmes disques"]. 


| Suis-je en train de déplacer une SVM ? | Se référer àlink:https://docs.netapp.com/us-en/ontap/svm-migrate/index.html#svm-migration-workflow["Aperçu de la mobilité des données SVM"^] . 


| Est-ce que je mets à niveau une configuration MetroCluster ? | Se référer àlink:https://docs.netapp.com/us-en/ontap-metrocluster/upgrade/concept_choosing_an_upgrade_method_mcc.html["Mettez à niveau, actualisez ou développez la configuration MetroCluster"^] . 


| Est-ce que je remplace un composant individuel ? | Se référer àlink:https://docs.netapp.com/us-en/ontap-systems/index.html["Documentation des systèmes matériels ONTAP"^] et localisez le dépliant de l'unité remplaçable sur site (FRU) pour ce composant. 
|===


== Exemple : Mise à niveau du FAS9500 vers le FAS90

Cet exemple présente les réponses possibles pour une mise à niveau du contrôleur FAS9500 vers FAS90.

[cols="30,70"]
|===
| Question | Exemple de réponse 


| Est-ce que j'utilise une version logicielle différente sur les nœuds d'origine et les nouveaux nœuds ? | Non. Les FAS9500 et FAS90 fonctionnent tous deux sous ONTAP 9.15.1. 


| Souhaite-je effectuer une mise à niveau disruptive ? | Non. Je souhaite maintenir mon environnement de production en ligne pendant la mise à niveau. 


| Souhaite-je effectuer une mise à niveau sans interruption de service ? | Oui. Selon que mon système soit modulaire ou intégré, je peux effectuer une mise à niveau en déplaçant des volumes ou en utilisant la relocalisation d'agrégats (ARL). 


| Ai-je un système modulaire ? | Oui. Le FAS9500 est un système modulaire avec des étagères de rangement externes.  Je peux effectuer la mise à niveau en utilisant ARL. 


| Ai-je un système intégré et souhaite-je le mettre à niveau en déplaçant des volumes ? | Non. Le FAS9500 est un système modulaire, cela ne s'applique donc pas. 


| Ai-je un système intégré et souhaite-je le mettre à niveau en remplaçant uniquement le module contrôleur, en conservant le châssis et les disques existants ? | Non. Le FAS9500 est un système modulaire, cela ne s'applique donc pas. 


| Suis-je en train de déplacer une SVM ? | Non. Je mets à niveau le matériel tout en conservant les mêmes SVM. 


| Est-ce que je mets à niveau une configuration MetroCluster ? | Non. Il s'agit d'un cluster HA standard. 


| Est-ce que je remplace un composant individuel ? | Non. Je mets à jour l'ensemble du système de contrôle. 
|===
*Chemin de mise à niveau recommandé pour cet exemple :*link:upgrade-arl/index.html["Mise à niveau à l'aide d'ARL"] car le FAS9500 est un système modulaire et ARL propose une méthode de mise à niveau non perturbatrice.
